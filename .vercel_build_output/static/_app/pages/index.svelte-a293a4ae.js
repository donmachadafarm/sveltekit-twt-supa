import{S as fe,i as me,s as _e,e as k,c as v,b as _,g as P,K,n as L,d as u,L as Me,M as Ve,N as ae,t as A,k as S,x as le,a as w,h as D,m as O,y as se,J as f,z as re,O as ie,P as Ae,Q as Ge,R as De,r as Q,p as X,C as ne,T as je,U as Pe,j as te,V as Ne,W as Te,X as Fe,l as ce,A as He,B as We,q as ze,D as Qe,o as Xe}from"../chunks/index-c46926fb.js";import{c as Je,g as ue,E as be,a as Ke,b as Ye,d as Ze,e as Le,s as xe}from"../chunks/navigation-fd1071ce.js";import"../chunks/singletons-d1fb5791.js";function et(l){let e,t,s;return{c(){e=k("input"),this.h()},l(n){e=v(n,"INPUT",{type:!0,class:!0}),this.h()},h(){_(e,"type","file"),_(e,"class","input")},m(n,r){P(n,e,r),t||(s=K(e,"change",l[0]),t=!0)},p:L,i:L,o:L,d(n){n&&u(e),t=!1,s()}}}function tt(l,e,t){let{file:s}=e;const n=r=>{t(1,s=!!r.target.files.length&&r.target.files[0])};return l.$$set=r=>{"file"in r&&t(1,s=r.file)},[n,s]}class lt extends fe{constructor(e){super(),me(this,e,tt,et,_e,{file:1})}}function $e(l){l[6]=l[8].data,l[7]=l[8].error}function st(l){return{c:L,l:L,m:L,p:L,i:L,o:L,d:L}}function rt(l){$e(l);let e,t,s,n,r,o,a=l[6]&&Ue();return r=new be({props:{error:l[7]}}),{c(){e=k("button"),t=A("Submit"),s=S(),a&&a.c(),n=S(),le(r.$$.fragment),this.h()},l(c){e=v(c,"BUTTON",{class:!0});var m=w(e);t=D(m,"Submit"),m.forEach(u),s=O(c),a&&a.l(c),n=O(c),se(r.$$.fragment,c),this.h()},h(){_(e,"class","btn")},m(c,m){P(c,e,m),f(e,t),P(c,s,m),a&&a.m(c,m),P(c,n,m),re(r,c,m),o=!0},p(c,m){$e(c),c[6]?a||(a=Ue(),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null);const y={};m&4&&(y.error=c[7]),r.$set(y)},i(c){o||(Q(r.$$.fragment,c),o=!0)},o(c){X(r.$$.fragment,c),o=!1},d(c){c&&u(e),c&&u(s),a&&a.d(c),c&&u(n),ne(r,c)}}}function Ue(l){let e,t;return{c(){e=k("strong"),t=A("Successfully created a post!"),this.h()},l(s){e=v(s,"STRONG",{class:!0});var n=w(e);t=D(n,"Successfully created a post!"),n.forEach(u),this.h()},h(){_(e,"class","text-green-500")},m(s,n){P(s,e,n),f(e,t)},d(s){s&&u(e)}}}function nt(l){let e,t;return{c(){e=k("button"),t=A("Submit"),this.h()},l(s){e=v(s,"BUTTON",{type:!0,class:!0});var n=w(e);t=D(n,"Submit"),n.forEach(u),this.h()},h(){e.disabled=!0,_(e,"type","button"),_(e,"class","btn")},m(s,n){P(s,e,n),f(e,t)},p:L,i:L,o:L,d(s){s&&u(e)}}}function ot(l){let e,t,s,n,r,o,a,c,m,y,E,j,B,b;function U(T){l[4](T)}let q={};l[0]!==void 0&&(q.file=l[0]),o=new lt({props:q}),Me.push(()=>Ve(o,"file",U));let N={ctx:l,current:null,token:null,hasCatch:!1,pending:nt,then:rt,catch:st,value:8,blocks:[,,,]};return ae(E=l[2],N),{c(){e=k("form"),t=k("label"),s=k("span"),n=A("Post"),r=S(),le(o.$$.fragment),c=S(),m=k("textarea"),y=S(),N.block.c(),this.h()},l(T){e=v(T,"FORM",{class:!0});var d=w(e);t=v(d,"LABEL",{for:!0,class:!0});var h=w(t);s=v(h,"SPAN",{class:!0});var F=w(s);n=D(F,"Post"),F.forEach(u),h.forEach(u),r=O(d),se(o.$$.fragment,d),c=O(d),m=v(d,"TEXTAREA",{class:!0}),w(m).forEach(u),y=O(d),N.block.l(d),d.forEach(u),this.h()},h(){_(s,"class","label-text text-xl"),_(t,"for","post"),_(t,"class","label"),m.required=!0,_(m,"class","textarea textarea-bordered"),_(e,"class","form-control")},m(T,d){P(T,e,d),f(e,t),f(t,s),f(s,n),f(e,r),re(o,e,null),f(e,c),f(e,m),ie(m,l[1]),f(e,y),N.block.m(e,N.anchor=null),N.mount=()=>e,N.anchor=null,j=!0,B||(b=[K(m,"input",l[5]),K(e,"submit",Ae(l[3]))],B=!0)},p(T,[d]){l=T;const h={};!a&&d&1&&(a=!0,h.file=l[0],Ge(()=>a=!1)),o.$set(h),d&2&&ie(m,l[1]),N.ctx=l,d&4&&E!==(E=l[2])&&ae(E,N)||De(N,l,d)},i(T){j||(Q(o.$$.fragment,T),Q(N.block),j=!0)},o(T){X(o.$$.fragment,T);for(let d=0;d<3;d+=1){const h=N.blocks[d];X(h)}j=!1},d(T){T&&u(e),ne(o),N.block.d(),N.token=null,N=null,B=!1,je(b)}}}function at(l,e,t){let s=null,n="",r=Promise.resolve({});const o=async()=>{t(2,r=Je({user:ue().email,content:n,imageFile:s}))};function a(m){s=m,t(0,s)}function c(){n=this.value,t(1,n)}return[s,n,r,o,a,c]}class it extends fe{constructor(e){super(),me(this,e,at,ot,_e,{})}}function Ce(l,e,t){const s=l.slice();return s[11]=e[t],s}function Re(l){l[14]=l[16].data,l[15]=l[16].error}function Se(l){let e,t,s;return{c(){e=k("figure"),t=k("img"),this.h()},l(n){e=v(n,"FIGURE",{});var r=w(e);t=v(r,"IMG",{alt:!0,src:!0}),r.forEach(u),this.h()},h(){_(t,"alt","kek"),Pe(t.src,s=l[4])||_(t,"src",s)},m(n,r){P(n,e,r),f(e,t)},p(n,r){r&16&&!Pe(t.src,s=n[4])&&_(t,"src",s)},d(n){n&&u(e)}}}function ct(l){return{c:L,l:L,m:L,p:L,i:L,o:L,d:L}}function ut(l){Re(l);let e,t,s,n;e=new be({props:{error:l[15]}});let r=l[14]&&Oe();return{c(){le(e.$$.fragment),t=S(),r&&r.c(),s=ce()},l(o){se(e.$$.fragment,o),t=O(o),r&&r.l(o),s=ce()},m(o,a){re(e,o,a),P(o,t,a),r&&r.m(o,a),P(o,s,a),n=!0},p(o,a){Re(o);const c={};a&64&&(c.error=o[15]),e.$set(c),o[14]?r||(r=Oe(),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},i(o){n||(Q(e.$$.fragment,o),n=!0)},o(o){X(e.$$.fragment,o),n=!1},d(o){ne(e,o),o&&u(t),r&&r.d(o),o&&u(s)}}}function Oe(l){let e;return{c(){e=A("Nice comment")},l(t){e=D(t,"Nice comment")},m(t,s){P(t,e,s)},d(t){t&&u(e)}}}function ft(l){let e;return{c(){e=A("Posting comment . .")},l(t){e=D(t,"Posting comment . .")},m(t,s){P(t,e,s)},p:L,i:L,o:L,d(t){t&&u(e)}}}function Be(l){let e=l[11].user+"",t,s,n,r=l[11].content+"",o;return{c(){t=A(e),s=A(" says. . . "),n=k("q"),o=A(r)},l(a){t=D(a,e),s=D(a," says. . . "),n=v(a,"Q",{});var c=w(n);o=D(c,r),c.forEach(u)},m(a,c){P(a,t,c),P(a,s,c),P(a,n,c),f(n,o)},p(a,c){c&2&&e!==(e=a[11].user+"")&&te(t,e),c&2&&r!==(r=a[11].content+"")&&te(o,r)},d(a){a&&u(t),a&&u(s),a&&u(n)}}}function mt(l){let e,t,s,n,r,o,a,c,m,y,E,j,B,b,U,q,N,T,d,h,F,C,i,p=l[0]===0?"Like":"Likes",W,$,M,z,he,J,pe,ge,V=l[4]&&Se(l),H={ctx:l,current:null,token:null,hasCatch:!1,pending:ft,then:ut,catch:ct,value:16,blocks:[,,,]};ae(j=l[6],H);let Y=l[1],G=[];for(let I=0;I<Y.length;I+=1)G[I]=Be(Ce(l,Y,I));return{c(){e=k("article"),V&&V.c(),t=S(),s=k("div"),n=k("h2"),r=A(l[2]),o=A(" says . ."),a=S(),c=k("p"),m=A(l[3]),y=S(),E=k("div"),H.block.c(),B=S(),b=k("form"),U=k("div"),q=k("input"),N=S(),T=k("button"),d=A("+"),h=S(),F=k("button"),C=A(l[0]),i=S(),W=A(p),$=S(),M=Ne("svg"),z=Ne("path"),he=S();for(let I=0;I<G.length;I+=1)G[I].c();this.h()},l(I){e=v(I,"ARTICLE",{class:!0});var R=w(e);V&&V.l(R),t=O(R),s=v(R,"DIV",{class:!0});var g=w(s);n=v(g,"H2",{class:!0});var Z=w(n);r=D(Z,l[2]),o=D(Z," says . ."),Z.forEach(u),a=O(g),c=v(g,"P",{});var ke=w(c);m=D(ke,l[3]),ke.forEach(u),y=O(g),E=v(g,"DIV",{class:!0});var x=w(E);H.block.l(x),B=O(x),b=v(x,"FORM",{class:!0});var ve=w(b);U=v(ve,"DIV",{class:!0});var oe=w(U);q=v(oe,"INPUT",{type:!0,placeholder:!0,class:!0}),N=O(oe),T=v(oe,"BUTTON",{class:!0});var Ee=w(T);d=D(Ee,"+"),Ee.forEach(u),oe.forEach(u),ve.forEach(u),h=O(x),F=v(x,"BUTTON",{class:!0});var ee=w(F);C=D(ee,l[0]),i=O(ee),W=D(ee,p),$=O(ee),M=Te(ee,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var we=w(M);z=Te(we,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),w(z).forEach(u),we.forEach(u),ee.forEach(u),x.forEach(u),he=O(g);for(let de=0;de<G.length;de+=1)G[de].l(g);g.forEach(u),R.forEach(u),this.h()},h(){_(n,"class","card-title"),_(q,"type","text"),_(q,"placeholder","Comment here. . "),_(q,"class","w-32 input input-bordered"),_(T,"class","btn btn-square"),_(U,"class","input-group flex"),_(b,"class","form-control"),_(z,"stroke-linecap","round"),_(z,"stroke-linejoin","round"),_(z,"stroke-width","2"),_(z,"d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"),_(M,"xmlns","http://www.w3.org/2000/svg"),_(M,"class","h-6 w-6"),_(M,"fill","none"),_(M,"viewBox","0 0 24 24"),_(M,"stroke","currentColor"),_(F,"class","btn gap-2"),_(E,"class","card-actions flex justify-between"),_(s,"class","card-body"),_(e,"class","card card-side bg-base-100 shadow-xl mt-8")},m(I,R){P(I,e,R),V&&V.m(e,null),f(e,t),f(e,s),f(s,n),f(n,r),f(n,o),f(s,a),f(s,c),f(c,m),f(s,y),f(s,E),H.block.m(E,H.anchor=null),H.mount=()=>E,H.anchor=B,f(E,B),f(E,b),f(b,U),f(U,q),ie(q,l[5]),f(U,N),f(U,T),f(T,d),f(E,h),f(E,F),f(F,C),f(F,i),f(F,W),f(F,$),f(F,M),f(M,z),f(s,he);for(let g=0;g<G.length;g+=1)G[g].m(s,null);J=!0,pe||(ge=[K(q,"input",l[10]),K(b,"submit",Ae(l[7])),K(F,"click",l[8])],pe=!0)},p(I,[R]){if(l=I,l[4]?V?V.p(l,R):(V=Se(l),V.c(),V.m(e,t)):V&&(V.d(1),V=null),(!J||R&4)&&te(r,l[2]),(!J||R&8)&&te(m,l[3]),H.ctx=l,R&64&&j!==(j=l[6])&&ae(j,H)||De(H,l,R),R&32&&q.value!==l[5]&&ie(q,l[5]),(!J||R&1)&&te(C,l[0]),(!J||R&1)&&p!==(p=l[0]===0?"Like":"Likes")&&te(W,p),R&2){Y=l[1];let g;for(g=0;g<Y.length;g+=1){const Z=Ce(l,Y,g);G[g]?G[g].p(Z,R):(G[g]=Be(Z),G[g].c(),G[g].m(s,null))}for(;g<G.length;g+=1)G[g].d(1);G.length=Y.length}},i(I){J||(Q(H.block),J=!0)},o(I){for(let R=0;R<3;R+=1){const g=H.blocks[R];X(g)}J=!1},d(I){I&&u(e),V&&V.d(),H.block.d(),H.token=null,H=null,Fe(G,I),pe=!1,je(ge)}}}function _t(l,e,t){let{id:s,user:n,content:r,likes:o=0,comments:a=[],publicURL:c=null}=e,m="",y=Promise.resolve({});const E=()=>{t(6,y=Ke({user:ue().email,post:s,content:m}).then(({data:b,error:U})=>(t(1,a=[...b,...a]),{data:b,error:U}))),t(5,m="")},j=()=>{t(0,o+=1),Ye({user:ue().email,post:s})};function B(){m=this.value,t(5,m)}return l.$$set=b=>{"id"in b&&t(9,s=b.id),"user"in b&&t(2,n=b.user),"content"in b&&t(3,r=b.content),"likes"in b&&t(0,o=b.likes),"comments"in b&&t(1,a=b.comments),"publicURL"in b&&t(4,c=b.publicURL)},[o,a,n,r,c,m,y,E,j,s,B]}class ht extends fe{constructor(e){super(),me(this,e,_t,mt,_e,{id:9,user:2,content:3,likes:0,comments:1,publicURL:4})}}function Ie(l,e,t){const s=l.slice();return s[4]=e[t],s}function ye(l){let e;return{c(){e=A("No posts found")},l(t){e=D(t,"No posts found")},m(t,s){P(t,e,s)},d(t){t&&u(e)}}}function qe(l){let e,t;const s=[l[4]];let n={};for(let r=0;r<s.length;r+=1)n=Qe(n,s[r]);return e=new ht({props:n}),{c(){le(e.$$.fragment)},l(r){se(e.$$.fragment,r)},m(r,o){re(e,r,o),t=!0},p(r,o){const a=o&1?He(s,[We(r[4])]):{};e.$set(a)},i(r){t||(Q(e.$$.fragment,r),t=!0)},o(r){X(e.$$.fragment,r),t=!1},d(r){ne(e,r)}}}function pt(l){let e,t,s,n,r,o,a,c,m,y,E,j,B,b,U,q,N,T;m=new it({}),B=new be({props:{error:l[1]}});let d=l[0]||[],h=[];for(let i=0;i<d.length;i+=1)h[i]=qe(Ie(l,d,i));const F=i=>X(h[i],1,1,()=>{h[i]=null});let C=null;return d.length||(C=ye()),{c(){e=k("header"),t=k("h1"),s=k("span"),n=A("Welcome to TwtDon!"),r=S(),o=k("button"),a=A("Logout"),c=S(),le(m.$$.fragment),y=S(),E=k("div"),j=S(),le(B.$$.fragment),b=S();for(let i=0;i<h.length;i+=1)h[i].c();U=ce(),C&&C.c(),this.h()},l(i){e=v(i,"HEADER",{class:!0});var p=w(e);t=v(p,"H1",{class:!0});var W=w(t);s=v(W,"SPAN",{});var $=w(s);n=D($,"Welcome to TwtDon!"),$.forEach(u),W.forEach(u),r=O(p),o=v(p,"BUTTON",{class:!0});var M=w(o);a=D(M,"Logout"),M.forEach(u),p.forEach(u),c=O(i),se(m.$$.fragment,i),y=O(i),E=v(i,"DIV",{class:!0}),w(E).forEach(u),j=O(i),se(B.$$.fragment,i),b=O(i);for(let z=0;z<h.length;z+=1)h[z].l(i);U=ce(),C&&C.l(i),this.h()},h(){_(t,"class","text-2xl"),_(o,"class","btn"),_(e,"class","flex justify-between"),_(E,"class","divider")},m(i,p){P(i,e,p),f(e,t),f(t,s),f(s,n),f(e,r),f(e,o),f(o,a),P(i,c,p),re(m,i,p),P(i,y,p),P(i,E,p),P(i,j,p),re(B,i,p),P(i,b,p);for(let W=0;W<h.length;W+=1)h[W].m(i,p);P(i,U,p),C&&C.m(i,p),q=!0,N||(T=K(o,"click",l[2]),N=!0)},p(i,[p]){const W={};if(p&2&&(W.error=i[1]),B.$set(W),p&1){d=i[0]||[];let $;for($=0;$<d.length;$+=1){const M=Ie(i,d,$);h[$]?(h[$].p(M,p),Q(h[$],1)):(h[$]=qe(M),h[$].c(),Q(h[$],1),h[$].m(U.parentNode,U))}for(Xe(),$=d.length;$<h.length;$+=1)F($);ze(),d.length?C&&(C.d(1),C=null):C||(C=ye(),C.c(),C.m(U.parentNode,U))}},i(i){if(!q){Q(m.$$.fragment,i),Q(B.$$.fragment,i);for(let p=0;p<d.length;p+=1)Q(h[p]);q=!0}},o(i){X(m.$$.fragment,i),X(B.$$.fragment,i),h=h.filter(Boolean);for(let p=0;p<h.length;p+=1)X(h[p]);q=!1},d(i){i&&u(e),i&&u(c),ne(m,i),i&&u(y),i&&u(E),i&&u(j),ne(B,i),i&&u(b),Fe(h,i),i&&u(U),C&&C.d(i),N=!1,T()}}}const vt=async()=>{const{data:l,error:e}=await Ze();return{props:{posts:l,error:e}}};function dt(l,e,t){let{posts:s,error:n}=e;ue()||Le("/login");const o=async()=>{await xe(),Le("/login")};return l.$$set=a=>{"posts"in a&&t(0,s=a.posts),"error"in a&&t(1,n=a.error)},[s,n,o]}class Et extends fe{constructor(e){super(),me(this,e,dt,pt,_e,{posts:0,error:1})}}export{Et as default,vt as load};
